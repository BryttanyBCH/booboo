--- makefile.unix    2010-07-27 11:26:00.000000000 +0400
+++ /tmp/makefile.unix    2010-07-27 11:38:48.576449786 +0400
@@ -3,33 +3,22 @@
 # file license.txt or http://www.opensource.org/licenses/mit-license.php.
 
 
-INCLUDEPATHS= \
- -I"/usr/include" \
- -I"/usr/local/include/wx-2.9" \
- -I"/usr/local/lib/wx/include/gtk2-unicode-debug-static-2.9"
-
-LIBPATHS= \
- -L"/usr/lib" \
- -L"/usr/local/lib"
-
-WXLIBS= \
- -Wl,-Bstatic \
-   -l wx_gtk2ud-2.9 \
- -Wl,-Bdynamic \
-   -l gtk-x11-2.0 -l SM
+INCLUDEPATHS=-I /usr/include/db4.8/
+
+LIBPATHS=-L"/usr/lib"
+
+WXLIBS=$(shell wx-config-2.9 --libs)
 
 LIBS= \
- -Wl,-Bstatic \
    -l boost_system \
    -l boost_filesystem \
    -l boost_program_options \
    -l boost_thread \
    -l db_cxx \
-   -l crypto \
- -Wl,-Bdynamic \
-   -l gthread-2.0
+   $(shell pkg-config --libs libcrypto) \
+   $(shell pkg-config --libs gthread-2.0)
 
-DEFS=-D__WXGTK__ -DNOPCH
+DEFS=$(shell wx-config-2.9 --cxxflags)
 DEBUGFLAGS=-g -D__WXDEBUG__
 CFLAGS=-O2 -Wno-invalid-offsetof -Wformat $(DEBUGFLAGS) $(DEFS) $(INCLUDEPATHS)
 HEADERS=headers.h strlcpy.h serialize.h uint256.h util.h key.h bignum.h base58.h \
